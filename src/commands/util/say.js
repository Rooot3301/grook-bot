import { SlashCommandBuilder } from 'discord.js'; import { withGuard } from '../../utils/commandGuard.js'; import { stripMassMentions, clampLength } from '../../utils/inputFilters.js';
export const data=new SlashCommandBuilder().setName('say').setDescription('Répète un message en toute sécurité.').addStringOption(o=>o.setName('text').setDescription('Message').setRequired(true));
async function run(interaction){const raw=interaction.options.getString('text',true); const safe=clampLength(stripMassMentions(raw),1800); await interaction.editReply('✅'); return interaction.channel.send(safe||'...');}
export const execute=withGuard(run,{perms:['ManageMessages'],ephemeralByDefault:true,cooldownMs:1500});